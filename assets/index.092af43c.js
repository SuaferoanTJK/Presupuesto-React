import{j as e,r as i,a as r,C as j,b as E,S as L,c as R,L as M,d as I,T as O,F,R as T,e as k}from"./vendor.b7686c53.js";const w=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const p of t.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function c(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerpolicy&&(t.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?t.credentials="include":o.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(o){if(o.ep)return;o.ep=!0;const t=c(o);fetch(o.href,t)}};w();function P({children:s,tipo:a}){return e("div",{className:`alerta ${a}`,children:s})}function _({presupuesto:s,setPresupuesto:a,isValidPresupuesto:c,setIsValidPresupuesto:l}){const[o,t]=i.exports.useState("");return e("div",{className:"contenedor-presupuesto contenedor sombra",children:r("form",{onSubmit:u=>{if(u.preventDefault(),!s||s<0){t("No es un presupuesto v\xE1lido");return}t(""),l(!0),console.log("Si es un presupuesto v\xE1lido")},className:"formulario",children:[r("div",{className:"campo",children:[e("label",{htmlFor:"presupuesto",children:"Definir Presupuesto"}),e("input",{className:"nuevo-presupuesto",type:"number",id:"presupuesto",placeholder:"A\xF1adir su presupuesto",value:s,onChange:u=>a(Number(u.target.value))})]}),e("input",{type:"submit",value:"A\xF1adir"}),o&&e(P,{tipo:"error",children:o})]})})}function $({presupuesto:s,setPresupuesto:a,setIsValidPresupuesto:c,gastos:l,setGastos:o}){const[t,p]=i.exports.useState(0),[u,d]=i.exports.useState(0),[m,v]=i.exports.useState(0);i.exports.useEffect(()=>{const g=l.reduce((x,y)=>y.cantidad+x,0),S=s-g,N=((s-S)/s*100).toFixed(0);v(N),d(g),p(S)},[l]);const h=g=>g.toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}),f=()=>{confirm("\xBFDesea resetear presupuesto y gastos?")&&(o([]),a(0),c(!1))};return r("div",{className:"contenedor-presupuesto contenedor sombra dos-columnas",children:[e("div",{children:e(j,{styles:E({pathColor:m>100?"#DC2626":"#3B82F6",trailColor:"#F5F5F5",textColor:m>100?"#DC2626":"#3B82F6"}),value:m,text:`${m}%`})}),r("div",{className:"contenido-presupuesto",children:[e("button",{className:"reset-app",type:"button",onClick:f,children:"Resetear app"}),r("p",{children:[e("span",{children:"Presupuesto: "}),h(s)]}),r("p",{className:`${t<0?"negativo":""}`,children:[e("span",{children:"Disponible: "}),h(t)]}),r("p",{children:[e("span",{children:"Gastado: "}),h(u)]})]})]})}function B({presupuesto:s,setPresupuesto:a,isValidPresupuesto:c,setIsValidPresupuesto:l,gastos:o,setGastos:t}){return r("header",{children:[e("h1",{children:"Planificador de Gastos"}),c?e($,{presupuesto:s,setPresupuesto:a,setIsValidPresupuesto:l,gastos:o,setGastos:t}):e(_,{presupuesto:s,setPresupuesto:a,isValidPresupuesto:c,setIsValidPresupuesto:l})]})}var z="/Presupuesto-React/assets/cerrar.ab3aac92.svg";function V({setModal:s,animarModal:a,setAnimarModal:c,guardarGasto:l,gastoEditar:o,setGastoEditar:t}){const[p,u]=i.exports.useState(""),[d,m]=i.exports.useState(""),[v,h]=i.exports.useState(""),[f,g]=i.exports.useState(""),[S,N]=i.exports.useState(""),[x,y]=i.exports.useState("");i.exports.useEffect(()=>{Object.keys(o).length>0&&(u(o.nombre),m(o.cantidad),h(o.categoria),y(o.id),N(o.fecha))},[]);const A=()=>{c(!1),t({}),setTimeout(()=>{s(!1)},500)},C=n=>{if(n.preventDefault(),[p,d,v].includes("")){g("Todos los campos son obligatorios"),setTimeout(()=>{g("")},2500);return}l({nombre:p,cantidad:d,categoria:v,id:x,fecha:S})};return r("div",{className:"modal",children:[e("div",{className:"cerrar-modal",children:e("img",{src:z,alt:"Cerrar modal",onClick:A})}),r("form",{className:`formulario ${a?"animar":"cerrar"}`,onSubmit:C,children:[e("legend",{children:o.nombre?"Editar Gasto":"Nuevo Gasto"}),f&&e(P,{tipo:"error",children:f}),r("div",{className:"campo",children:[e("label",{htmlFor:"nombre",children:"Nombre Gasto"}),e("input",{type:"text",id:"nombre",placeholder:"A\xF1adir el nombre del gasto",value:p,onChange:n=>u(n.target.value)})]}),r("div",{className:"campo",children:[e("label",{htmlFor:"cantidad",children:"Cantidad"}),e("input",{type:"number",id:"cantidad",placeholder:"A\xF1adir la cantidad del gasto. Ej: 300",value:d,onChange:n=>m(Number(n.target.value))})]}),r("div",{className:"campo",children:[e("label",{htmlFor:"categoria",children:"Categoria"}),r("select",{id:"categoria",value:v,onChange:n=>h(n.target.value),children:[e("option",{value:"",children:"-- Seleccione --"}),e("option",{value:"ahorro",children:"Ahorro"}),e("option",{value:"casa",children:"Casa"}),e("option",{value:"comida",children:"Comida"}),e("option",{value:"gastos",children:"Gastos Varios"}),e("option",{value:"ocio",children:"Ocio"}),e("option",{value:"salud",children:"Salud"}),e("option",{value:"suscripciones",children:"Suscripciones"})]})]}),e("input",{type:"submit",value:o.nombre?"Actualizar Gasto":"Agregar Gasto"})]})]})}function J({filtro:s,setFiltro:a}){return e("div",{className:"filtros sombra contenedor",children:e("form",{children:r("div",{className:"campo",children:[e("label",{children:"Filtrar Gastos"}),r("select",{value:s,onChange:c=>a(c.target.value),children:[e("option",{value:"",children:"-- Todas las categor\xEDas --"}),e("option",{value:"ahorro",children:"Ahorro"}),e("option",{value:"casa",children:"Casa"}),e("option",{value:"comida",children:"Comida"}),e("option",{value:"gastos",children:"Gastos Varios"}),e("option",{value:"ocio",children:"Ocio"}),e("option",{value:"salud",children:"Salud"}),e("option",{value:"suscripciones",children:"Suscripciones"})]})]})})})}const U=()=>{const s=Math.random().toString(36).substr(2),a=Date.now().toString(36);return s+a},q=s=>{const a=new Date(s),c={year:"numeric",month:"long",day:"2-digit"};return a.toLocaleDateString("es-ES",c)};var H="/Presupuesto-React/assets/icono_ahorro.ff2959d3.svg",K="/Presupuesto-React/assets/icono_casa.1170ce11.svg",Q="/Presupuesto-React/assets/icono_comida.db0a9016.svg",W="/Presupuesto-React/assets/icono_gastos.e6dea3b0.svg",X="/Presupuesto-React/assets/icono_ocio.ad5d0e9e.svg",Y="/Presupuesto-React/assets/icono_salud.41ba3136.svg",Z="/Presupuesto-React/assets/icono_suscripciones.97f04dc8.svg";const ee={ahorro:H,casa:K,comida:Q,gastos:W,ocio:X,salud:Y,suscripciones:Z};function D({gasto:s,setGastoEditar:a,eliminarGasto:c}){const{nombre:l,cantidad:o,categoria:t,fecha:p,id:u}=s,d=()=>e(M,{children:e(I,{onClick:()=>a(s),children:"Editar"})}),m=()=>e(O,{children:e(I,{onClick:()=>c(u),destructive:!0,children:"Eliminar"})});return e(L,{children:e(R,{leadingActions:d(),trailingActions:m(),children:r("div",{className:"gasto sombra",children:[r("div",{className:"contenido-gasto",children:[e("img",{src:ee[t],alt:"Icono Gasto"}),r("div",{className:"descripcion-gasto",children:[e("p",{className:"categoria",children:t}),e("p",{className:"nombre-gasto",children:l}),r("p",{className:"fecha-gasto",children:["Agregado el: ",e("span",{children:q(p)})]})]})]}),r("p",{className:"cantidad-gasto",children:["$",o]})]})})})}function oe({gastos:s,setGastoEditar:a,eliminarGasto:c,filtro:l,gastosFiltrados:o}){return e("div",{className:"listado-gastos contenedor",children:l?r(F,{children:[e("h2",{children:o.length?"Gastos":"Todav\xEDa no hay gastos en esta categor\xEDa"}),o.map(t=>e(D,{gasto:t,setGastoEditar:a,eliminarGasto:c},t.id))]}):r(F,{children:[e("h2",{children:s.length?"Gastos":"Todav\xEDa no hay gastos"}),s.map(t=>e(D,{gasto:t,setGastoEditar:a,eliminarGasto:c},t.id))]})})}var te="/Presupuesto-React/assets/nuevo-gasto.3ab385ce.svg";function se(){var C;const[s,a]=i.exports.useState((C=Number(localStorage.getItem("presupuesto")))!=null?C:0),[c,l]=i.exports.useState(!1),[o,t]=i.exports.useState(!1),[p,u]=i.exports.useState(!1),[d,m]=i.exports.useState(localStorage.getItem("gastos")?JSON.parse(localStorage.getItem("gastos")):[]),[v,h]=i.exports.useState({}),[f,g]=i.exports.useState(""),[S,N]=i.exports.useState([]);return i.exports.useEffect(()=>{Object.keys(v).length>0&&(t(!0),setTimeout(()=>{u(!0)},500))},[v]),i.exports.useEffect(()=>{var n;(n=Number(localStorage.setItem("presupuesto",s)))!=null},[s]),i.exports.useEffect(()=>{var n;(n=Number(localStorage.setItem("gastos",JSON.stringify(d))))!=null},[d]),i.exports.useEffect(()=>{if(f){const n=d.filter(b=>b.categoria===f);N(n)}},[f]),i.exports.useEffect(()=>{var b;((b=Number(localStorage.getItem("presupuesto")))!=null?b:0)>0&&l(!0)},[]),r("div",{className:o?"fijar":"",children:[e(B,{presupuesto:s,setPresupuesto:a,isValidPresupuesto:c,setIsValidPresupuesto:l,gastos:d,setGastos:m}),c&&r(F,{children:[r("main",{children:[e(J,{filtro:f,setFiltro:g}),e(oe,{gastos:d,setGastoEditar:h,eliminarGasto:n=>{const b=d.filter(G=>G.id!==n);m(b)},filtro:f,gastosFiltrados:S})]}),e("div",{className:"nuevo-gasto",children:e("img",{src:te,alt:"Icono Nuevo Gasto",onClick:()=>{t(!0),h({}),setTimeout(()=>{u(!0)},500)}})})]}),o&&e(V,{setModal:t,animarModal:p,setAnimarModal:u,guardarGasto:n=>{setTimeout(()=>{if(n.id){const b=d.map(G=>G.id===n.id?n:G);m(b),h({})}else n.id=U(),n.fecha=Date.now(),m([...d,n])},700),u(!1),setTimeout(()=>{t(!1)},500)},gastoEditar:v,setGastoEditar:h})]})}T.render(e(k.StrictMode,{children:e(se,{})}),document.getElementById("root"));
